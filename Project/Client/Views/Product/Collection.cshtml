@using Client.Models.ProductDTO
@model ProductViewModel

<style>
/*     body {
        background-color: #1b2838;
        color: #c7d5e0;
        font-family: Arial, sans-serif;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .wishlist-container {
        width: 80%;
        max-width: 900px;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
        color: #ffffff;
    } */

    /* .collections {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .collection-card {
        width: 180px;
        height: 200px;
        background-color: #2a475e;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: #ffffff;
        position: relative;
        overflow: hidden;
    }

        .collection-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0.6;
        }

        .collection-card .text {
            position: relative;
            z-index: 1;
        }

        .collection-card .title {
            font-size: 18px;
            font-weight: bold;
            margin: 0;
        }

        .collection-card .count {
            font-size: 14px;
            color: #c7d5e0;
        }

    .delete-icon {
        position: absolute;
        top: 8px;
        right: 8px;
        font-size: 18px;
        color: #ffffff;
        cursor: pointer;
        z-index: 2;
        transition: color 0.3s;
    }

        .delete-icon:hover {
            color: #ff4d4d;
        }


    .modal {
        display: none;
        position: fixed;
        z-index: 10;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        justify-content: center;
        align-items: center;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

        .modal.show {
            display: flex;
            opacity: 1;
        }

    .modal-content {
        background-color: #2a475e;
        color: #ffffff;
        padding: 20px;
        border-radius: 8px;
        width: 300px;
        text-align: center;
    }

    .modal-buttons {
        margin-top: 20px;
        display: flex;
        justify-content: space-around;
    }

    .btn-confirm, .btn-cancel {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .btn-confirm {
        background-color: #00A97F;
        color: white;
    }

    .btn-cancel {
        background-color: #ff4d4d;
        color: white;
    }

    .btn-confirm:hover {
        background-color: #00996b;
    }

    .btn-cancel:hover {
        background-color: #e63939;
    } */

/*     .add-new {
        background-color: #2a475e;
        border: 2px dashed #c7d5e0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #c7d5e0;
        font-size: 16px;
        cursor: pointer;
    } */

    

</style>

<div class="wishlist-container">
    <h1 class="text-success"><i class="fas fa-heart"></i> Your Library</h1>
    <div class="collections">
        <div class="collection-card add-new">
            + CREATE A NEW LIBRARY
        </div>
        @if (Model.oderitem != null)
        {
            foreach (var image in Model.oderitem)
            {
                <a asp-controller="Product" asp-action="ProductDetail" asp-route-id="@image.ProductId">
                    <div class="collection-card">
                        
                        <img src="@image.ImageUrl" alt="Favorites">
                        <div class="text">
                            <p class="title text-danger text-decoration-none">@image.ProductName</p>
                        </div>
                    </div>
                </a>
            }
        }
        else
        {
            <p>khong co library</p>
        }
    </div>
</div>


<div class="wishlist-container">
    <h1 class="text-success"><i class="fas fa-heart"></i> Your Wishlist</h1>
    <div class="collections">
        <div class="collection-card add-new">
            + CREATE A NEW WISHLIST
        </div>
        @if (Model.Wishlist != null)
        {
            foreach (var image in Model.Wishlist)
            {
                <div class="collection-card">
                    <span class="delete-icon" onclick="confirmDelete()">&times;</span>
                    <img src="@image.ProductImage" alt="Favorites">
                    <div class="text">
                        <p class="title text-white">@image.ProductName</p>
                    </div>
                </div>
            }
        }
        else
        {
            <p>khong co wishlist</p>
        }
    </div>
</div>

        



<!-- Modal Xác nhận Xóa -->
<div id="deleteModal" class="modal">
    <div class="modal-content">
        <p>Bạn có muốn xóa Game khỏi Wishlist?</p>
        <div class="modal-buttons">
            <button id="btnYes" class="btn-confirm">Yes</button>
            <button onclick="closeModal()" class="btn-cancel">No</button>
        </div>
    </div>
</div>

@* <div class="mt-3" style="background-color: #1c1f26;
            color: #fff;
            display: flex;
            flex-direction: column;">

    <!-- Your Collections and Create a New Collection -->
    <div class="container mt-5">
        <div class="row align-items-center">
            <div class="col-auto">
                <h2 class="mb-0">Your Collections</h2>
            </div>
        </div>
    </div>

    <!-- Collection Cards -->
    <div class="container mt-4 container-content">
        <div class="row">
            <!-- Create a New Collection -->
            <div class="col-2 mb-4">
                <label for="fileInput" class="collection-card d-flex align-items-center justify-content-center">
                    <h6 class="text-center">+ Create a New Collection</h6>
                </label>
                <input type="file" class="d-none" id="fileInput" multiple>
            </div>

            <!-- Favorites Collection -->
            <div class="col-2 mb-4">
                <div class="collection-card" style="background-image: url('https://via.placeholder.com/200x150');">
                    <h6>Favorites (12)</h6>
                </div>
            </div>

            <!-- Heheh Collection -->
            <div class="col-2 mb-4">
                <div class="collection-card" style="background-image: url('https://via.placeholder.com/200x150');">
                    <h6>Heheh (1)</h6>
                </div>
            </div>

            <!-- Product 4 -->
            <div class="col-2 mb-4">
                <div class="collection-card" style="background-image: url('https://via.placeholder.com/200x150');">
                    <h6>Product 4</h6>
                </div>
            </div>

            <!-- Product 5 -->
            <div class="col-2 mb-4">
                <div class="collection-card" style="background-image: url('https://via.placeholder.com/200x150');">
                    <h6>Product 5</h6>
                </div>
            </div>

            <!-- Product 6 -->
            <div class="col-2 mb-4">
                <div class="collection-card" style="background-image: url('https://via.placeholder.com/200x150');">
                    <h6>Product 6</h6>
                </div>
            </div>
        </div>
    </div>

    <!-- Manage Downloads -->
    <div class="manage-downloads">
        <span>Manage Downloads</span>
    </div>

    <!-- Bootstrap 5 JS Bundle (with Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

</div>
 *@
 <script>
    function confirmDelete() {
        document.getElementById("deleteModal").classList.add("show");
    }

    function closeModal() {
        document.getElementById("deleteModal").classList.remove("show");
    }

    const btnYes = document.getElementById("btnYes");

    // Lưu vị trí ban đầu của nút Yes
    let previousX = btnYes.offsetLeft;
    let previousY = btnYes.offsetTop;

    btnYes.addEventListener("mouseover", () => {
        const modalWidth = document.querySelector(".modal-content").offsetWidth;
        const modalHeight = document.querySelector(".modal-content").offsetHeight;
        let randomX, randomY, distance;

        do {
            // Tạo vị trí ngẫu nhiên lớn hơn để nút "Yes" di chuyển xa hơn
            randomX = Math.random() * (modalWidth - btnYes.offsetWidth) * 3;
            randomY = Math.random() * (modalHeight - btnYes.offsetHeight) * 3;

            // Tính khoảng cách giữa vị trí mới và vị trí cũ
            distance = Math.sqrt(Math.pow(randomX - previousX, 2) + Math.pow(randomY - previousY, 2));
        } while (distance < 200); // Đảm bảo khoảng cách ít nhất là 200px

        // Cập nhật vị trí của nút "Yes"
        btnYes.style.position = "absolute";
        btnYes.style.left = `${randomX}px`;
        btnYes.style.top = `${randomY}px`;

        // Cập nhật vị trí cũ thành vị trí mới
        previousX = randomX;
        previousY = randomY;
    });


 </script>