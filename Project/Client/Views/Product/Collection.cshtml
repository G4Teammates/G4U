@using Client.Models.ProductDTO
@model ProductViewModel

<style>
/*     body {
        background-color: #1b2838;
        color: #c7d5e0;
        font-family: Arial, sans-serif;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .wishlist-container {
        width: 80%;
        max-width: 900px;
    }

    h1 {
        text-align: center;
        margin-bottom: 20px;
        color: #ffffff;
    } */

    .collections {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .collection-card {
        width: 180px;
        height: 200px;
        background-color: #2a475e;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: #ffffff;
        position: relative;
        overflow: hidden;
    }

        .collection-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0.6;
        }

        .collection-card .text {
            position: relative;
            z-index: 1;
        }

        .collection-card .title {
            font-size: 18px;
            font-weight: bold;
            margin: 0;
        }

        .collection-card .count {
            font-size: 14px;
            color: #c7d5e0;
        }

/*     .add-new {
        background-color: #2a475e;
        border: 2px dashed #c7d5e0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #c7d5e0;
        font-size: 16px;
        cursor: pointer;
    } */
</style>

<div class="wishlist-container">
    <h1 class="text-success"><i class="fas fa-heart"></i> Your Library</h1>
    <div class="collections">
        <div class="collection-card add-new">
            + CREATE A NEW WISHLIST
        </div>
        @if (Model.Product != null)
        { foreach (var product in Model.Product)
            {
                <div class="collection-card">
                    @if (product.Links != null)
                    {
                        string firstImageUrl = null; // Biến để lưu URL hình ảnh đầu tiên

                        foreach (var link in product.Links) // Lặp qua từng đối tượng LinkModel
                        {
                            if (link.Url.Contains("cloudinary"))
                            {
                                firstImageUrl = link.Url; // Lưu URL hình ảnh đầu tiên
                                break; // Thoát khỏi vòng lặp khi đã tìm thấy
                            }
                        }

                        // Hiển thị hình ảnh đầu tiên nếu có
                        if (firstImageUrl != null)
                        {
                            <img src="@firstImageUrl" alt="Cloudinary Image" />
                        }


                    }
                    <div class="text">
                        <p class="title text-white">@product.Name</p>
                    </div>
                </div>
            }
        }
        

    </div>
</div>


<div class="wishlist-container">
    <h1 class="text-success"><i class="fas fa-heart"></i> Your Wishlist</h1>
    <div class="collections">
        <div class="collection-card add-new">
            + CREATE A NEW WISHLIST
        </div>
        @if (Model.Wishlist != null)
        {
            foreach (var image in Model.Wishlist)
            {
                <div class="collection-card">
                    <img src="@image.ProductImage" alt="Favorites">
                    <div class="text">
                        <p class="title text-white">@image.ProductName</p>
                    </div>
                </div>

            }

        }

    </div>
</div>

@* <div class="mt-3" style="background-color: #1c1f26;
            color: #fff;
            display: flex;
            flex-direction: column;">

    <!-- Your Collections and Create a New Collection -->
    <div class="container mt-5">
        <div class="row align-items-center">
            <div class="col-auto">
                <h2 class="mb-0">Your Collections</h2>
            </div>
        </div>
    </div>

    <!-- Collection Cards -->
    <div class="container mt-4 container-content">
        <div class="row">
            <!-- Create a New Collection -->
            <div class="col-2 mb-4">
                <label for="fileInput" class="collection-card d-flex align-items-center justify-content-center">
                    <h6 class="text-center">+ Create a New Collection</h6>
                </label>
                <input type="file" class="d-none" id="fileInput" multiple>
            </div>

            <!-- Favorites Collection -->
            <div class="col-2 mb-4">
                <div class="collection-card" style="background-image: url('https://via.placeholder.com/200x150');">
                    <h6>Favorites (12)</h6>
                </div>
            </div>

            <!-- Heheh Collection -->
            <div class="col-2 mb-4">
                <div class="collection-card" style="background-image: url('https://via.placeholder.com/200x150');">
                    <h6>Heheh (1)</h6>
                </div>
            </div>

            <!-- Product 4 -->
            <div class="col-2 mb-4">
                <div class="collection-card" style="background-image: url('https://via.placeholder.com/200x150');">
                    <h6>Product 4</h6>
                </div>
            </div>

            <!-- Product 5 -->
            <div class="col-2 mb-4">
                <div class="collection-card" style="background-image: url('https://via.placeholder.com/200x150');">
                    <h6>Product 5</h6>
                </div>
            </div>

            <!-- Product 6 -->
            <div class="col-2 mb-4">
                <div class="collection-card" style="background-image: url('https://via.placeholder.com/200x150');">
                    <h6>Product 6</h6>
                </div>
            </div>
        </div>
    </div>

    <!-- Manage Downloads -->
    <div class="manage-downloads">
        <span>Manage Downloads</span>
    </div>

    <!-- Bootstrap 5 JS Bundle (with Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

</div>
 *@